<div ng-app="myApp">
    <div class="container-fluid">
        <div class="row-fluid" ng-view>
            <!-- START NSQUARED CONTENT -->
            <div class="nav">
                <div class="toolbar btn-toolbar" ng-controller="NavCtrl">
                    <div class="btn-group">
                        <button class="btn dropdown-toggle" data-toggle="dropdown">
                            Sort
                            <span class="caret">
                            </span>
                        </button>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="#">Relevance</a>
                                <a href="#">Popularity</a>
                                <a href="#">Date</a>
                            </li>
                        </ul>
                    </div>
                    <div class="btn-group">
                        <button class="btn dropdown-toggle" data-toggle="dropdown">
                            Color
                            <span class="caret">
                            </span>
                        </button>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="#">Red</a>
                            </li>
                            <li>
                                <a href="#">Orange</a>
                            </li>
                            <li>
                                <a href="#">Yellow</a>
                            </li>
                            <li>
                                <a href="#">Green</a>
                            </li>
                            <li>
                                <a href="#">Blue</a>
                            </li>
                            <li>
                                <a href="#">Purple</a>
                            </li>
                            <li>
                                <a href="#">Black</a>
                            </li>
                            <li>
                                <a href="#">White</a>
                            </li>
                        </ul>
                    </div>
                    <div class="btn-group">
                        <button class="btn dropdown-toggle" data-toggle="dropdown">
                            Categories
                            <span class="caret">
                            </span>
                        </button>
                        <ul class="dropdown-menu">
                            <li class="category" ng-repeat="category in categories">
                                <a href ng-click="$emit('categoryFilter', category)">{{category}}</a>
                            </li>
                        </ul>
                    </div>
                    <div class="btn-group">
                        <form class="form-search" ng-submit="$emit('search', query)">
                            <input type="text" class="search-query" placeholder="Search" ng-model="query">
                        </form>
                    </div>
                    <div class="sort-types">
                        <span class="label label-info" ng-show="category.category">
                            {{category.category}}
                            <a ng-click="$emit('categoryFilter', null)">x</a>
                        </span>
                        <span class="label label-info" ng-show="query">
                            <i class="icon-search icon-white">
                            </i>
                            {{query}}
                            <a class="label" ng-click="query = null; $emit('search', query);">x</a>
                        </span>
                    </div>
                </div>
            </div>
            <div class="nrelate nrelate_related nrelate_tre nr_1col nr_150">
                <div class="nr_inner">
                    <a class="nr_panel nr_rc_link nr_link nr_internal" ng-repeat="square in content | filter:category"
                    data-toggle="modal" href="{{'#modal' + $index}}" data-index={{$index}}
                    ng-click="console.log('modal clicked');">
                      <span class="nr_img_div">
                        <img ng-src="{{square.img}}" class="nr_img">
                      </span>
                      <span class="nr_text">
                        <span class="nr_post_title">
                          {{square.title}}
                        </span>
                      </span>
                    </a>
                </div>
            </div>
            <div class="modal hide fade" id="{{'modal' + $index}}" ng-repeat="square in content | filter:category"
            modal-inject>
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        Ã—
                    </button>
                    <a href="{{square.link}}"><h3>{{square.title}}</h3></a>
                    <!-- PINIT html <a href="http://pinterest.com/pin/create/button/?url=http%3A%2F%2Fwww.urlofpage.com&media=http%3A%2F%2Fwww.urlofpage.com%2Fimage.jpg&description=Description%20of%20page"
                    class="pin-it-button" count-layout="none"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a> 
  -->
                </div>
                <div class="modal-body inject-target">
                </div>
            </div>
        </div>
    </div>
</div>